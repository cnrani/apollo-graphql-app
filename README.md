# Apollo Client Enhancers with React Starter Project

This project is for used with the Mastering Apollo Series on WintellectNOW [http://www.wintellectnow.com](http://www.wintelltectnow.com)

## Project Setup

### Requirements

- Node.js (version 8 or later)
- Web Browser

### Instructions

**Step 1.** Clone/Download this repository. If downloading the zip file, then extract the zip file.

**Step 2.** Open a terminal window and change to the folder containing the "package.json" file.

**Step 3.** Run the following commands:

```bash
npm install

npm run start-rest-server
```
**Step 4.** Open a second terminal window and change to the folder containing the "package.json" file.

**Step 5.** Run the following command:

```bash
npm run start-graphql-server
```
**Step 6.** Open a third terminal window and change to the folder containing the "package.json" file.

**Step 7.** Run the following command:

```bash
npm run start-client
```

**Step 8.** Your system's default web browser should open and browse to the URL http://localhost:3000.

### Modifying the Project

The server files can be modified in the "server-src" folder. The "server-dist" folder is generated by the "start-server" command. Do not edit the files in the "server-dist" folder as they will be overwritten. The client files can be modified in the "public" and "src" folders. The "src" folder contains the JavaScript code for the Apollo Client and React Components.

### FAQ

**Question 1.** If you have another version of Node.js installed on your system which does not work with this course, then please consider installing [NVM](https://github.com/creationix/nvm) (for Mac & Linux) or [NVM-Windows](https://github.com/coreybutler/nvm-windows) to enable the installation of multiple versions of Node.js. Both tools support the installation, management and switching between multiple versions of Node.js. Using these tools, installing Node.js version 8 or later without losing your older version should be possible. This course does not provide support for these tools, the course only suggests using them if needed.

**Question 2.** The default ports number for the three server applications are as follows:

  - Web Server: 3000
  - GraphQL Server: 3010
  - REST Server: 3020

  If your system is running programs on these ports there will be a conflict when these three servers are started. Either disable the other applications running on those ports or change the port numbers for this project's servers within your "package.json" file. To change the port numbers, modify the port values specified in the "config" section of the "package.json". No changes to the JavaScript code is needed as the code reads the environment variables set by the config section.

**Question 3.** If you are running on Windows and running the above "npm" commands with Cygwin Bash then substitute the above commands with these:

```bash
npm run start-rest-server-cygwin

npm run start-graphql-server-cygwin

npm run start-client-cygwin
```

If you are using the Windows Command Prompt (default on Windows), then use the original commands listed in the instructions.


Replace car's graphql query

mutation ReplaceCar($car: ReplaceCar) {
    replaceCar(car: $car) {
      id
      make
      model
      year
      color
      price
   }
  }
  
  query variable -
  {
    "car": {
      "id":4,"make":"LexusUpdated","model":"ES",
      "year":2020,"color":"silver","price":50000
    }
  }
  
  
  
  
  //Exercises
  
  Exercise 1
  
  1. In the db.json file there is some widgets data. Create a schema type for the a Widget, and add a schema entry to the Query type for return all of the widgets.
  
  2. Add a resolver entry to return the widgets.
  
  3. Write a GraphQL query to query all of the widgets and run it in the GraphQL playground.
  
  
  Exercise 2
  
  1. Copy the CarTable component (and any extra components needed) to the Apollo application. You may put them in the components folder (create the folder if needed)
  
  2. Utilize the CarTable component in App.js to display the table of cars. Do not worry about the button on the row, don't delete them but just provide noop functions to them.
  
  3. Ensure it works.

Exercise 3

1. Implement AppendWidget for the Widgets.

2. Implement ReplaceCar and ReplaceWidget mutation. So the replace, will take the car or widget passed in and replace the widget on the REST service.

3. Test the AppendWidget, ReplaceCar and ReplaceWidget mutations in the GraphQL playground.

4. Ensure it works.

Exercise 4

1. Using the client setEditCarId, upgrade the Car Table in the Apollo Car Tool App to display the edit row when the edit button it clicked on the table.

2. Implement the Delete, Save and Cancel button for the Apollo Car Tool application.

3. Ensure Add Car, Edit Car, Delete Car, Save Car, and Cancel Car all work. For the operations which require writing data to the server, ensure the data is written.

4. After Adding, Saving, and Deleting, ensure the editCarId is set to -1.

5. Ensure it all works.

